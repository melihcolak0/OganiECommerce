
@{
    Layout = null;    

    int totalPages = (int)Math.Ceiling((decimal)ViewBag.TotalProducts / ViewBag.PageSize);
    int currentPage = ViewBag.Page;
    int maxPagesToShow = 5;

    int startPage = Math.Max(1, currentPage - maxPagesToShow / 2);
    int endPage = startPage + maxPagesToShow - 1;

    if (endPage > totalPages)
    {
        endPage = totalPages;
        startPage = Math.Max(1, endPage - maxPagesToShow + 1);
    }
}

<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Ogani Template">
    <meta name="keywords" content="Ogani, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Ogani E-Ticaret Sistemi</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;900&display=swap" rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="/ogani-master/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/ogani-master/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="/ogani-master/css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="/ogani-master/css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="/ogani-master/css/jquery-ui.min.css" type="text/css">
    <link rel="stylesheet" href="/ogani-master/css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="/ogani-master/css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="/ogani-master/css/style.css" type="text/css">

    <style>

        .product__pagination {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            gap: 5px; /* Butonlar arası boşluk */
        }

        .page-info {
            position: absolute;
            left: 0;
            font-weight: bold;
            margin: 0;
        }

        .slider-container {
            position: relative;
            width: 100%;
            height: 40px;
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

            .slider-container::before {
                content: '';
                position: absolute;
                width: 100%;
                height: 5px;
                background: #ddd;
                border-radius: 5px;
                top: 50%;
                transform: translateY(-50%);
            }

            .slider-container input[type="range"] {
                position: absolute;
                width: 100%;
                background: transparent;
                -webkit-appearance: none;
                appearance: none;
                height: 40px;
                margin: 0;
                padding: 0;
                pointer-events: none; /* Input'un kendisi tıklanamaz */
            }

                /* Thumb'lar tıklanabilir */
                .slider-container input[type="range"]::-webkit-slider-thumb {
                    pointer-events: auto; /* Sadece top tıklanabilir */
                    width: 20px;
                    height: 20px;
                    border-radius: 50%;
                    background: #7fad39;
                    cursor: grab;
                    -webkit-appearance: none;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
                    transition: all 0.1s ease;
                }

                    .slider-container input[type="range"]::-webkit-slider-thumb:hover {
                        transform: scale(1.1);
                        box-shadow: 0 3px 6px rgba(0,0,0,0.3);
                    }

                .slider-container input[type="range"]:active::-webkit-slider-thumb {
                    cursor: grabbing;
                    transform: scale(1.15);
                }

                /* Firefox için */
                .slider-container input[type="range"]::-moz-range-thumb {
                    pointer-events: auto;
                    width: 20px;
                    height: 20px;
                    border-radius: 50%;
                    background: #7fad39;
                    cursor: grab;
                    border: none;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
                    transition: all 0.1s ease;
                }

                    .slider-container input[type="range"]::-moz-range-thumb:hover {
                        transform: scale(1.1);
                        box-shadow: 0 3px 6px rgba(0,0,0,0.3);
                    }

                .slider-container input[type="range"]:active::-moz-range-thumb {
                    cursor: grabbing;
                    transform: scale(1.15);
                }

                .slider-container input[type="range"]::-moz-range-track {
                    background: transparent;
                    border: none;
                }

                .slider-container input[type="range"]::-webkit-slider-runnable-track {
                    background: transparent;
                    border: none;
                }

        .slider-track {
            position: absolute;
            height: 5px;
            background: #7fad39;
            border-radius: 5px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
        }
    </style>    
</head>

<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Humberger Begin -->
    <div class="humberger__menu__overlay"></div>
    <div class="humberger__menu__wrapper">
        <div class="humberger__menu__logo">
            <a href="#"><img src="/ogani-master/img/logo.png" alt=""></a>
        </div>
        <div class="humberger__menu__cart">
            <ul>
                <li><a href="#"><i class="fa fa-heart"></i></a></li>
                <li><a href="#"><i class="fa fa-shopping-bag"></i></a></li>
            </ul>
        </div>
        <div class="humberger__menu__widget">
            <div class="header__top__right__language">
                <img src="https://flagcdn.com/w2560/tr.png" style="height:20px; width:30px" alt="">
                <div>Türkçe</div>
                <span class="arrow_carrot-down"></span>
                <ul>
                    <li><a href="#">İngilizce</a></li>
                    <li><a href="#">İspanyolca</a></li>
                </ul>
            </div>
            <div class="header__top__right__auth">
                <a href="#"><i class="fa fa-user"></i> Giriş Yap</a>
            </div>
        </div>
        <nav class="humberger__menu__nav mobile-menu">
            <ul>
                <li class="active"><a href="/Default/Index">Ana Sayfa</a></li>
                <li><a href="./shop-grid.html">Ürünler</a></li>               
                <li><a href="./blog.html">Blog</a></li>
                <li><a href="./contact.html">İletişim</a></li>
            </ul>
        </nav>
        <div id="mobile-menu-wrap"></div>
        <div class="header__top__right__social">
            <a href="#"><i class="fa fa-facebook"></i></a>
            <a href="#"><i class="fa fa-twitter"></i></a>
            <a href="#"><i class="fa fa-linkedin"></i></a>
            <a href="#"><i class="fa fa-pinterest-p"></i></a>
        </div>
        <div class="humberger__menu__contact">
            <ul>
                <li><i class="fa fa-envelope"></i> info@ogani.com</li>
                <li>250 ₺ üzeri alışverişlerde kargo ücretsiz</li>
            </ul>
        </div>
    </div>
    <!-- Humberger End -->
    <!-- Header Section Begin -->
    <header class="header">
        <div class="header__top">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 col-md-6">
                        <div class="header__top__left">
                            <ul>
                                <li><i class="fa fa-envelope"></i> info@ogani.com</li>
                                <li>250 ₺ üzeri alışverişlerde kargo ücretsiz</li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6">
                        <div class="header__top__right">
                            <div class="header__top__right__social">
                                <a href="#"><i class="fa fa-facebook"></i></a>
                                <a href="#"><i class="fa fa-twitter"></i></a>
                                <a href="#"><i class="fa fa-linkedin"></i></a>
                                <a href="#"><i class="fa fa-pinterest-p"></i></a>
                            </div>
                            <div class="header__top__right__language">
                                <img src="https://flagcdn.com/w2560/tr.png" style="height:20px; width:30px" alt="">
                                <div>Türkçe</div>
                                <span class="arrow_carrot-down"></span>
                                <ul>
                                    <li><a href="#">İngilizce</a></li>
                                    <li><a href="#">İspanyolca</a></li>
                                </ul>
                            </div>
                            <div class="header__top__right__auth">
                                <a href="#"><i class="fa fa-user"></i> Giriş Yap</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="header__logo">
                        <a href="/Default/Index"><img src="/ogani-master/img/logo.png" alt=""></a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <nav class="header__menu">
                        <ul>
                            <li><a href="/Default/Index">Ana Sayfa</a></li>
                            <li class="active"><a href="/Default/Products">Ürünler</a></li>
                            <li><a href="./blog.html">Blog</a></li>
                            <li><a href="/Default/Contact">İLETİŞİM</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="col-lg-3">
                    <div class="header__cart">
                        <ul>
                            <li><a href="#"><i class="fa fa-heart"></i></a></li>
                            <li><a href="#"><i class="fa fa-shopping-bag"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="humberger__open">
                <i class="fa fa-bars"></i>
            </div>
        </div>
    </header>
    <!-- Header Section End -->
    <!-- Hero Section Begin -->
    <section class="hero hero-normal">
        <div class="container">
            <div class="row">
                @await Component.InvokeAsync("_CategorySidebarDefault")
                <div class="col-lg-9">
                    <div class="hero__search">
                        <div class="hero__search__form">
                            <form action="#">
                                <div class="hero__search__categories">
                                    Kategoriler
                                    <span class="arrow_carrot-down"></span>
                                </div>
                                <input type="text" placeholder="Neye ihtiyacınız var?">
                                <button type="submit" class="site-btn">ARA</button>
                            </form>
                        </div>
                        <div class="hero__search__phone">
                            <div class="hero__search__phone__icon">
                                <i class="fa fa-phone"></i>
                            </div>
                            <div class="hero__search__phone__text">
                                <a href="https://web.whatsapp.com/send?phone=901234567890" target="_blank" rel="noopener">
                                    +90 123 456 78 90
                                </a>
                                <br />
                                <span>7/24 Online Destek</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Hero Section End -->
    <!-- Breadcrumb Section Begin -->
    <section class="breadcrumb-section set-bg" data-setbg="/ogani-master/img/breadcrumb.jpg">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="breadcrumb__text">
                        <h2>Ürünlerimiz</h2>
                        <div class="breadcrumb__option">
                            <a href="/Default/Index">Ana Sayfa </a>
                            <span>Ürünlerimiz</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Section End -->
    <!-- Product Section Begin -->
    <section class="product spad">
        <div class="container">
            <div class="row">
                <!-- Sol Menü -->
                <div class="col-lg-3 col-md-5">
                    <div class="sidebar">
                        <!-- Kategori Listesi -->
                        <div class="sidebar__item">
                            <h4>Kategoriler</h4>
                            <ul>
                                @foreach (var cat in (List<string>)ViewBag.Categories)
                                {
                                    <li>
                                        <a href="@Url.Action("Products", new { category = cat })">@cat</a>
                                    </li>
                                }
                            </ul>
                        </div>

                        <!-- Fiyat Aralığı -->
                        <div class="sidebar__item">
                            <h4>Fiyat</h4>
                            <div class="price-range-wrap">
                                <div class="slider-container">
                                    <input type="range" id="minRange" min="5" max="420" value="@(ViewBag.MinPrice ?? 5)">
                                    <input type="range" id="maxRange" min="5" max="420" value="@(ViewBag.MaxPrice ?? 420)">
                                </div>

                                <p>
                                    <span id="minValue">@(ViewBag.MinPrice ?? 5)</span> ₺ -
                                    <span id="maxValue">@(ViewBag.MaxPrice ?? 420)</span> ₺
                                </p>

                                <button id="filterBtn" class="site-btn mt-2">Filtrele</button>
                            </div>                            
                        </div>

                        <div class="sidebar__item sidebar__item__color--option">
                            <h4>Renk</h4>
                            <div class="sidebar__item__color sidebar__item__color--white">
                                <label for="white">
                                    Beyaz
                                    <input type="radio" id="white">
                                </label>
                            </div>
                            <div class="sidebar__item__color sidebar__item__color--gray">
                                <label for="gray">
                                    Gri
                                    <input type="radio" id="gray">
                                </label>
                            </div>
                            <div class="sidebar__item__color sidebar__item__color--red">
                                <label for="red">
                                    Kırmızı
                                    <input type="radio" id="red">
                                </label>
                            </div>
                            <div class="sidebar__item__color sidebar__item__color--black">
                                <label for="black">
                                    Siyah
                                    <input type="radio" id="black">
                                </label>
                            </div>
                            <div class="sidebar__item__color sidebar__item__color--blue">
                                <label for="blue">
                                    Mavi
                                    <input type="radio" id="blue">
                                </label>
                            </div>
                            <div class="sidebar__item__color sidebar__item__color--green">
                                <label for="green">
                                    Yeşil
                                    <input type="radio" id="green">
                                </label>
                            </div>
                        </div>
                        <div class="sidebar__item">
                            <h4>Boyut</h4>
                            <div class="sidebar__item__size">
                                <label for="large">
                                    Büyük
                                    <input type="radio" id="large">
                                </label>
                            </div>
                            <div class="sidebar__item__size">
                                <label for="medium">
                                    Orta
                                    <input type="radio" id="medium">
                                </label>
                            </div>
                            <div class="sidebar__item__size">
                                <label for="small">
                                    Küçük
                                    <input type="radio" id="small">
                                </label>
                            </div>
                            <div class="sidebar__item__size">
                                <label for="tiny">
                                    Çok Küçük
                                    <input type="radio" id="tiny">
                                </label>
                            </div>
                        </div>
                        @await Component.InvokeAsync("_PopularProductsProducts")
                    </div>
                </div>

                

                <!-- Ürün Listesi -->
                <div class="col-lg-9 col-md-7">

                    @await Component.InvokeAsync("_DiscountedProductsProducts")

                    <div class="filter__item">
                       @*  <div class="row">
                            <div class="section-title product__discount__title">
                                <h2>Tüm Ürünlerimiz</h2>
                            </div>
                            
                            <div class="col-lg-6">
                                <h6><span>(@ViewBag.TotalProducts</span> ürün listeleniyor.)</h6>
                            </div>
                        </div> *@
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="section-title product__discount__title">
                                    <h2>Tüm Ürünlerimiz</h2>
                                </div>
                                <h6><span>(@ViewBag.TotalProducts</span> ürün listeleniyor.)</h6>
                            </div>
                        </div>
                    </div>
                   
                    <div class="row">
                        @foreach (var item in Model)
                        {
                            <div class="col-lg-4 col-md-6 col-sm-6">
                                <div class="product__item">
                                    <div class="product__item__pic set-bg" data-setbg="@item.ImageUrl">
                                        <ul class="product__item__pic__hover">
                                            <li><a href="#"><i class="fa fa-heart"></i></a></li>
                                            <li><a href="#"><i class="fa fa-retweet"></i></a></li>
                                            <li><a href="#"><i class="fa fa-shopping-cart"></i></a></li>
                                        </ul>
                                    </div>
                                    <div class="product__item__text">
                                        <h6><a href="#">@item.ProductName</a></h6>
                                        <h5>@item.UnitPrice ₺</h5>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>

                    <!-- Sayfalama -->
                    <div class="product__pagination">
                        @* Sayfa bilgisi *@
                        <span class="page-info">
                            Sayfa @currentPage / @totalPages
                        </span>
                        @* Geri ok *@
                        @if (currentPage > 1)
                        {
                            <a href="@Url.Action("Products", new { page = currentPage - 1, category = ViewBag.Category, minPrice = ViewBag.MinPrice, maxPrice = ViewBag.MaxPrice })">
                                <i class="fa fa-long-arrow-left"></i>
                            </a>
                        }

                        @* Sayfalar *@
                        @for (int i = startPage; i <= endPage; i++)
                        {
                            <a href="@Url.Action("Products", new { page = i, category = ViewBag.Category, minPrice = ViewBag.MinPrice, maxPrice = ViewBag.MaxPrice })"
                               class="@(i == currentPage ? "active" : "")">@i</a>
                        }

                        @* İleri ok *@
                        @if (currentPage < totalPages)
                        {
                            <a href="@Url.Action("Products", new { page = currentPage + 1, category = ViewBag.Category, minPrice = ViewBag.MinPrice, maxPrice = ViewBag.MaxPrice })">
                                <i class="fa fa-long-arrow-right"></i>
                            </a>
                        }
                        
                    </div>                    
                </div>
            </div>
        </div>
    </section>    
    <!-- Product Section End -->
    <!-- Footer Section Begin -->
    <footer class="footer spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="footer__about">
                        <div class="footer__about__logo">
                            <a href="/Default/Index"><img src="/ogani-master/img/logo.png" alt=""></a>
                        </div>
                        <ul>
                            <li>Adres: Ümraniye, İstanbul, TR</li>
                            <li>Telefon: +90 123 456 78 90</li>
                            <li>E-Mail: info@ogani.com</li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-6 offset-lg-1">
                    <div class="footer__widget">
                        <h6>Hızlı Bağlantılar</h6>
                        <ul>
                            <li><a href="#">Hakkımızda</a></li>
                            <li><a href="#">Alışveriş Hakkında</a></li>
                            <li><a href="#">Güvenli  Alışveriş</a></li>
                            <li><a href="#">Kargo Hizmetleri</a></li>
                            <li><a href="#">Gizlilik Politikası</a></li>
                            <li><a href="#">Site Haritamız</a></li>
                        </ul>
                        <ul>
                            <li><a href="#">Biz Kimiz</a></li>
                            <li><a href="#">Hizmetlerimiz</a></li>
                            <li><a href="#">Projelerimiz</a></li>
                            <li><a href="#">İletişim</a></li>
                            <li><a href="#">Yeniliklerimiz</a></li>
                            <li><a href="#">Referanslarımız</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4 col-md-12">
                    <div class="footer__widget">
                        <h6>Hemen Bültenimize Kaydolun</h6>
                        <p>Yeni ürünlerimiz ve özel teklflerimizden haberdar olun.</p>
                        <form action="#">
                            <input type="text" placeholder="E-Mail Adresiniz">
                            <button type="submit" class="site-btn">Abone Ol</button>
                        </form>
                        <div class="footer__widget__social">
                            <a href="#"><i class="fa fa-facebook"></i></a>
                            <a href="#"><i class="fa fa-instagram"></i></a>
                            <a href="#"><i class="fa fa-twitter"></i></a>
                            <a href="#"><i class="fa fa-pinterest"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="footer__copyright">
                        <div class="footer__copyright__text">
                            <p>
                                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                                Copyright &copy;<script>document.write(new Date().getFullYear());</script> Tüm hakları saklıdır | Bu tema <i class="fa fa-heart" aria-hidden="true"></i> ile <a href="https://colorlib.com" target="_blank">Colorlib</a> tarafından oluşturulmuştur.
                                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                            </p>
                        </div>
                        <div class="footer__copyright__payment"><img src="/ogani-master/img/payment-item.png" alt=""></div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- Footer Section End -->
    <!-- Js Plugins -->
    <script src="/ogani-master/js/jquery-3.3.1.min.js"></script>
    <script src="/ogani-master/js/bootstrap.min.js"></script>
    <script src="/ogani-master/js/jquery.nice-select.min.js"></script>
    <script src="/ogani-master/js/jquery-ui.min.js"></script>
    <script src="/ogani-master/js/jquery.slicknav.js"></script>
    <script src="/ogani-master/js/mixitup.min.js"></script>
    <script src="/ogani-master/js/owl.carousel.min.js"></script>
    <script src="/ogani-master/js/main.js"></script>   

    <script>
        const minRange = document.getElementById('minRange');
        const maxRange = document.getElementById('maxRange');
        const minValue = document.getElementById('minValue');
        const maxValue = document.getElementById('maxValue');
        const filterBtn = document.getElementById('filterBtn');
        const container = document.querySelector('.slider-container');

        // Seçili alanı gösterecek yeşil bar
        const track = document.createElement('div');
        track.className = 'slider-track';
        container.appendChild(track);

        function updateSlider() {
            let min = parseInt(minRange.value);
            let max = parseInt(maxRange.value);

            // min'in max'ı geçmesini engelle
            if (max - min < 5) {
                if (event.target.id === "minRange") {
                    minRange.value = max - 5;
                } else {
                    maxRange.value = min + 5;
                }
            }

            min = parseInt(minRange.value);
            max = parseInt(maxRange.value);

            minValue.textContent = min;
            maxValue.textContent = max;

            const percent1 = ((min - 5) / (420 - 5)) * 100;
            const percent2 = ((max - 5) / (420 - 5)) * 100;

            track.style.left = percent1 + "%";
            track.style.right = (100 - percent2) + "%";
        }

        minRange.addEventListener('input', updateSlider);
        maxRange.addEventListener('input', updateSlider);

        updateSlider(); // sayfa yüklenince ilk konumları ayarla

        filterBtn.addEventListener('click', () => {
            const min = minRange.value;
            const max = maxRange.value;
            const url = `/Default/Products?minPrice=${min}&maxPrice=${max}`;
            window.location.href = url;
        });
    </script>

</body>
</html>
